<div class="flex justify-center bg-neutral-900 pt-28">

<!-- start dashboard -->
<div class="container text-white py-3 px-4">
  <div class="header w-full mainBg rounded-md flex justify-between items-center py-2 px-3">
    <h2>Hello , {{information.username}}</h2>
    <i class="fa-solid fa-layer-group cursor-pointer hover:text-orange-300"></i>
  </div>
  <div class="header w-full bg-black cursor-pointer hover:bg-violet-400/20  rounded-md flex justify-center items-center flex-wrap my-3 py-4 px-2 md:px-8">
    <div class="flex justify-between items-center flex-wrap me-10">
      <h2 class="text-violet-400 me-3">Platforms:</h2>
      <div class="flex flex-wrap">
        <div class="flex  items-center gap-2 me-4">
          <p>twitter - x : </p>
          @if (view.request.x_twitter) {
            <i class="fa-solid fa-circle-check text-green-600 mt-1"></i>
          }
          @else{
            <i class="fa-solid fa-circle-xmark text-red-600 mt-1"></i>
          }
        </div>
        <div class="flex items-center gap-2">
          <p>facebook : </p>
          @if (view.request.facebook) {
            <i class="fa-solid fa-circle-check text-green-600 mt-1"></i>
          }
          @else{
            <i class="fa-solid fa-circle-xmark text-red-600 mt-1"></i>
          }
        </div>
      </div>
    </div>
    <div class="flex justify-start items-cente flex-wrap">
      <p class="text-violet-500 me-4">form : <span class="text-white"> {{view.request.start_date}} </span> </p>
      <p class="text-violet-500">to : <span class="text-white"> {{view.request.end_date}} </span> </p>
    </div>
  </div>
  <div class="flex flex-col my-3 gap-3">
    <div class="flex flex-wrap justify-center gap-3">
      <div class="w-40 h-36 mainBg flex-grow rounded-md flex justify-around items-center cursor-pointer">
          <i class="fa-solid fa-chart-pie text-white text-4xl"></i>
          <div class="text-center leading-10">
              <h3 class="text-xl sectionTitle"> {{ removeQuotes(view.request.query) }}</h3>
          </div>
      </div>
        <div class="w-60 h-36 bg-black flex-grow rounded-md flex justify-between px-5 items-center cursor-pointer hover:bg-violet-400/20 ">
            <i class="fa-solid fa-user text-white text-3xl me-10"></i>
            <div>
              <div class="pb-2">
                <h3 class="text-base sectionTitle">Total Count </h3>
              </div>
              @if (view.request.x_twitter) {
                <div class="text-center flex justify-between items-center">
                  <h3 class="text-base">Twitter</h3>
                  <p class="text-base mainColor ms-4">{{view.dashboard.neutral.count+view.dashboard.negative.count+view.dashboard.positive.count}}</p>
                </div>
                }
                @if (view.request.facebook) {
                  <div class="text-center flex justify-between items-center">
                    <h3 class="text-base">Facebook</h3>
                    <p class="text-base mainColor ms-4">{{view.dashboard.neutral.count_facebook+view.dashboard.negative.count_facebook+view.dashboard.positive.count_facebook}}</p>
                  </div>
                }
            </div>
        </div>
        @if (view.request.x_twitter) {
        <div class="w-60 h-36 bg-black flex-grow rounded-md flex justify-around items-center cursor-pointer hover:bg-violet-400/20">
          <div class="text-center w-9/12 leading-10">
            <div class="pb-2">
              <h3 class="text-base sectionTitle">Twitter</h3>
            </div>
            <div class="flex flex-nowrap justify-between items-center">
              <h3 class="text-base text-green-500">
                <span class="inline-block w-2 h-2 bg-green-500 rounded-full me-1"></span> positive
              </h3>
              <p class="text-base">
                {{ view.dashboard.positive.count }} -
                {{
                  (view.dashboard.positive.count /
                  (view.dashboard.positive.count + view.dashboard.neutral.count + view.dashboard.negative.count)) * 100
                  | number:'1.1-1'
                }} %
              </p>
            </div>
            <div class="flex flex-nowrap justify-between items-center">
              <h3 class="text-base text-yellow-500">
                <span class="inline-block w-2 h-2 bg-yellow-500 rounded-full me-1"></span> neutral
              </h3>
              <p class="text-base">
                {{ view.dashboard.neutral.count }} -
                {{
                  (view.dashboard.neutral.count /
                  (view.dashboard.positive.count + view.dashboard.neutral.count + view.dashboard.negative.count)) * 100
                  | number:'1.1-1'
                }} %
              </p>
            </div>
            <div class="flex flex-nowrap justify-between items-center">
              <h3 class="text-base text-red-500">
                <span class="inline-block w-2 h-2 bg-red-500 rounded-full me-1"></span> negative
              </h3>
              <p class="text-base">
                {{ view.dashboard.negative.count }} -
                {{
                  (view.dashboard.negative.count /
                  (view.dashboard.positive.count + view.dashboard.neutral.count + view.dashboard.negative.count)) * 100
                  | number:'1.1-1'
                }} %
              </p>
            </div>
          </div>
        </div>
      }

      @if (view.request.facebook) {
        <div class="w-60 h-36 bg-black flex-grow rounded-md flex justify-around items-center cursor-pointer hover:bg-violet-400/20">
          <div class="text-center w-9/12 leading-10">
            <div class="pb-2">
              <h3 class="text-base sectionTitle">Facebook</h3>
            </div>
            <div class="flex flex-nowrap justify-between items-center">
              <h3 class="text-base text-green-500">
                <span class="inline-block w-2 h-2 bg-green-500 rounded-full me-1"></span> positive
              </h3>
              <p class="text-base">
                {{ view.dashboard.positive.count_facebook }} -
                {{
                  (view.dashboard.positive.count_facebook /
                  (view.dashboard.positive.count_facebook + view.dashboard.neutral.count_facebook + view.dashboard.negative.count_facebook)) * 100
                  | number:'1.1-1'
                }} %
              </p>
            </div>
            <div class="flex flex-nowrap justify-between items-center">
              <h3 class="text-base text-yellow-500">
                <span class="inline-block w-2 h-2 bg-yellow-500 rounded-full me-1"></span> neutral
              </h3>
              <p class="text-base">
                {{ view.dashboard.neutral.count_facebook }} -
                {{
                  (view.dashboard.neutral.count_facebook /
                  (view.dashboard.positive.count_facebook + view.dashboard.neutral.count_facebook + view.dashboard.negative.count_facebook)) * 100
                  | number:'1.1-1'
                }} %
              </p>
            </div>
            <div class="flex flex-nowrap justify-between items-center">
              <h3 class="text-base text-red-500">
                <span class="inline-block w-2 h-2 bg-red-500 rounded-full me-1"></span> negative
              </h3>
              <p class="text-base">
                {{ view.dashboard.negative.count_facebook }} -
                {{
                  (view.dashboard.negative.count_facebook /
                  (view.dashboard.positive.count_facebook + view.dashboard.neutral.count_facebook + view.dashboard.negative.count_facebook)) * 100
                  | number:'1.1-1'
                }} %
              </p>
            </div>
          </div>
        </div>
      }
    </div>
    <div class="h-36 bg-black flex-grow rounded-md flex justify-around items-center cursor-pointer hover:bg-violet-400/20">
        <i class="fa-solid fa-pen text-white text-4xl"></i>
        @if (view.request.x_twitter) {
          <div class="text-center leading-10">
            <h3 class="text-xl">All Tweets</h3>
            <p class="text-xl mainColor">{{view.dashboard.neutral.posts.length+view.dashboard.negative.posts.length+view.dashboard.positive.posts.length}}</p>
          </div>
        }
        @if (view.request.facebook) {
          <div class="text-center leading-10">
            <h3 class="text-xl">All Posts</h3>
            <p class="text-xl mainColor">{{view.dashboard.neutral.posts_from_facebook.length+view.dashboard.negative.posts_from_facebook.length+view.dashboard.positive.posts_from_facebook.length}}</p>
          </div>
        }
    </div>
  </div>

  <div class="header w-full mainBg rounded-md flex justify-between items-center py-2 px-3">
      <h2>Dashboard</h2>
      <i class="fa-solid fa-chart-pie cursor-pointer hover:text-orange-300"></i>
  </div>
  <div class="flex flex-wrap justify-center my-3 gap-3">
    <div class="w-40 h-80 bg-black flex-grow rounded-md flex justify-around items-center cursor-pointer hover:bg-neutral-950">
      <div class="text-center leading-10">
        <canvas #myChartCanvas *ngIf="view"></canvas>
      </div>
    </div>
  </div>

  <div class="header w-full mainBg rounded-md flex justify-between items-center py-2 px-3">
      <h2>Posts</h2>
      <i class="fa-solid fa-table cursor-pointer hover:text-orange-300"></i>
  </div>
  <div class="w-full text-center my-3">
    <div class="w-full  py-2 bg-neutral-950 border border-violet-800 rounded-lg shadow-sm sm:p-8">
      <div class="flex items-center justify-between mb-4">
        <h5 class="text-sm md:text-xl font-bold px-6 md:px-0 sectionTitle">{{commentType}}</h5>
        @if(showDropdown) {
          <div>
            <button
              id="dropdownBtn"
              data-dropdown-toggle="dropdownMenu"
              data-dropdown-trigger="click"
              data-dropdown-delay="500"
              class="text-sm md:text-xl bg-violet-700 text-white me-4 md:me-0 px-2 md:px-10 py-1 rounded-lg flex items-center gap-2 border border-violet-700  hover:bg-transparent duration-300">
              {{ commentType }}
              <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="2"
                viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>

            <div
              id="dropdownMenu"
              class="z-10 hidden bg-neutral-800 divide-y divide-gray-100 rounded-lg shadow w-44">
              <ul class="py-2 text-sm  dark:text-gray-200">
                <li><p class="block px-4 py-2 text-green-500 hover:bg-neutral-900 cursor-pointer" (click)="sentiment('positive')">positive</p></li>
                <li><p class="block px-4 py-2 text-yellow-500 hover:bg-neutral-900 cursor-pointer" (click)="sentiment('neutral')">neutral</p></li>
                <li><p class="block px-4 py-2 text-red-500 hover:bg-neutral-900 cursor-pointer" (click)="sentiment('negative')">negative</p></li>
              </ul>
            </div>
          </div>
        }
      </div>
      <div class="flow-root">
          <ul role="list" class="divide-y divide-violet-500" dir="rtl">
            @if(tweets.length > 0 || posts.length > 0){
              @for (item of tweets; track $index) {
                <li class="p-3 sm:p-4 hover:bg-neutral-900 duration-300 rounded-lg cursor-pointer my-2">
                  <div class="flex flex-col items-cente justify-center">
                    <div class="flex items-center justify-between">
                      <div class="flex items-center">
                        <div>
                        <img class="w-8 h-8 rounded-full" src="../../../assets/image/user.jpg" alt="user image">
                        </div>
                        <div class="flex items-center">
                          <a [href]="'https://x.com/' + item.user_username "target="_blank">
                            <h3 class="text-xs md:text-sm ms-2">{{item.user_name}}</h3>
                          </a>
                          <i class="fa-solid fa-circle-check text-xs ms-2 bg-slate-300 rounded-full"
                            [ngClass]="item.user_blue_is_verified ? 'text-blue-500' : 'text-neutral-600'">
                          </i>
                          <span class="text-xs md:text-sm ms-2 bg-neutral-700 px-2 py-0.5  rounded-md ">{{item.user_follower_count}} متابع</span>
                        </div>
                      </div>
                      <div class="inline-flex items-center text-base font-semibold text-gray-900 dark:text-white">
                        <i class="fa-brands fa-x-twitter text-2xl text-white hover:text-black hover:bg-white duration-300 cursor-pointer"></i>
                        <span class="text-xs md:text-sm ms-2 px-2 py-0.5 rounded-sm" [ngClass]="{'bg-green-100 text-green-600 ': item.sentiment === 'positive','bg-yellow-100 text-yellow-600 ': item.sentiment === 'neutral','bg-red-200 text-red-600 ': item.sentiment === 'negative'}">
                          {{item.sentiment}}
                        </span>
                      </div>
                    </div>
                    <div class="flex items-center justify-between mt-4">
                      <div class="flex-1 min-w-0 ms-4" dir="auto">
                        <p class="text-sm text-white px-5">
                          {{item.text}}
                        </p>
                      </div>
                    </div>
                    <div class="flex items-center justify-between pt-14 px-5"c dir="ltr">
                      <p class="text-sm sm:text-xl text-white hover:text-violet-500 duration-200 cursor-pointer">
                        <i class="fa-solid fa-heart"></i>
                        {{item.favorite_count}}
                      </p>
                      <p class="text-sm sm:text-xl text-white hover:text-violet-500 duration-200 cursor-pointer">
                        <i class="fa-solid fa-comment-dots"></i>
                        {{item.reply_count}}
                      </p>
                      <p class="text-sm sm:text-xl text-white hover:text-violet-500 duration-200 cursor-pointer">
                        <i class="fa-solid fa-retweet"></i>
                        {{item.retweet_count}}
                      </p>
                      <p class="text-sm sm:text-xl text-white hover:text-violet-500 duration-200 cursor-pointer">
                        <i class="fa-solid fa-eye"></i>
                        {{item.views_count}}
                      </p>
                    </div>
                    <div class="flex items-center justify-between pt-4 px-5">
                      <p class="text-sm  text-gray-300">{{item.creation_date}}</p>
                      <a [href]="'https://twitter.com/' + item.user_username + '/status/' + item.tweet_id" target="_blank" class="text-violet-400 hover:underline">
                        View Tweet
                      </a>
                      <p class="text-sm  text-gray-300">{{item.source}}</p>
                    </div>
                  </div>
                </li>
              }
              @for (item of posts; track $index) {
                <li class="p-3 sm:p-4 hover:bg-neutral-900 duration-300 rounded-lg cursor-pointer my-2">
                  <div class="flex flex-col items-cente justify-center">
                    <div class="flex items-center justify-between">
                      <div class="flex items-center">
                        <div>
                        <img class="w-8 h-8 rounded-full" src="../../../assets/image/user.jpg" alt="user image">
                        </div>
                        <div class="flex items-center">
                          <a [href]="'https://www.facebook.com/' + item.user_id "target="_blank">
                            <h3 class="text-xs md:text-sm ms-2">{{item.user_name}}</h3>
                          </a>
                        </div>
                      </div>
                      <div class="inline-flex items-center text-base font-semibold text-gray-900 dark:text-white">
                        <i class="fa-brands fa-facebook text-2xl text-blue-500 hover:text-blue-400 cursor-pointer"></i>
                        <span class="text-xs md:text-sm ms-2 px-2 py-0.5 rounded-sm" [ngClass]="{'bg-green-100 text-green-600 ': item.sentiment === 'positive','bg-yellow-100 text-yellow-600 ': item.sentiment === 'neutral','bg-red-200 text-red-600 ': item.sentiment === 'negative'}">
                          {{item.sentiment}}
                        </span>
                      </div>
                    </div>
                    <div class="flex items-center justify-between mt-4">
                      <div class="flex-1 min-w-0 ms-4" dir="auto">
                        <p class="text-sm text-white px-5">
                          {{item.text}}
                        </p>
                      </div>
                    </div>
                    <div class="flex items-center justify-between pt-14 px-5"c dir="ltr">
                      <p class="text-sm sm:text-xl text-white hover:text-violet-500 duration-200 cursor-pointer">
                        <i class="fa-solid fa-thumbs-up"></i>
                        {{item.favorite_count}}
                      </p>
                      <p class="text-sm sm:text-xl text-white hover:text-violet-500 duration-200 cursor-pointer">
                        <i class="fa-solid fa-comment-dots"></i>
                        {{item.reply_count}}
                      </p>
                      <p class="text-sm sm:text-xl text-white hover:text-violet-500 duration-200 cursor-pointer">
                        <i class="fa-solid fa-retweet"></i>
                        {{item.retweet_count}}
                      </p>
                    </div>
                    <div class="flex items-center justify-between pt-4 px-5">
                      <p class="text-sm  text-gray-300">{{item.creation_date}}</p>
                      <a [href]="'https://www.facebook.com/' + item.user_id + '/posts/' + item.tweet_id" target="_blank" class="text-violet-400 hover:underline">
                        View Post
                      </a>
                      <p class="text-sm  text-gray-300">{{item.source}}</p>
                    </div>
                  </div>
                </li>
              }
            }
            @else {
              <div>
                <i class="text-violet-300 text-3xl fa-solid fa-comments"></i>
                <p>no tweets or posts yet</p>
              </div>
            }
          </ul>
      </div>
    </div>
  </div>

</div>
<!-- end dashboard -->

</div>
